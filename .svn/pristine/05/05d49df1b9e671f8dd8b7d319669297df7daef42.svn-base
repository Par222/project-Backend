import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import {faTrash, faPenToSquare, faAngleDown, faAngleUp} from "@fortawesome/free-solid-svg-icons"
import EditModal from '../common/EditModal';
import UserForm from './UserForm';
import { useState } from 'react';

function DoctorRow(props){
    // console.log(props)
    const [showModal, setShowModal] = useState(false)
    const [showStyle, setStyle] = useState("h-12")
    const [showDesc, setDesc] = useState(`${props.des.split(' ')[0]}${props.des.split(' ').length>1?"...":""}`)
    // const [showArrow, setArrow] = useState('faAngleDown')
    function clickArrow(){
        if (showStyle === 'h-12'){
            props.des.split(' ').length>1?setStyle("min-h-12"):setStyle("h-12");
            setDesc(props.des)
            // setArrow('faAngleUp')
        }
        else{
            setStyle("h-12");
            setDesc(`${props.des.split(' ')[0]}${props.des.split(' ').length>1?"...":""}`)
            // setArrow('faAngleDown')
        }
    }
    return(
        <div className={`flex w-full ${showStyle} px-5 items-center border-b-2 bg-white py-1`}>
            {showModal && 
            <EditModal title={`Edit ${props.name}`} isStepModal={false} closeHandler={() => setShowModal(false)}>
            <UserForm editUser={props.editUser} 
            id = {props.id}
            name={props.name}
            age={props.age}
            expertise={props.expertise}
            fees={props.fees}
            desc={props.des}
            isAdd={false}
            closeHandler={() => setShowModal(false)}></UserForm>
            </EditModal>}
            <div className='w-[5%] mr-[2%]'>
                {props.index}
            </div>
            <div className='w-[15%]'>
                {props.name}
            </div>
            <div className='w-[10%]'>
                {props.age}
            </div>
            <div className='w-[15%]'>
                {props.expertise}
            </div>
            <div className='w-[8%]'>
                â‚¹{props.fees}
            </div>
            <div className='w-[10%]'>
                {showDesc}
            </div>
            <div className='w-[5%]'>
                {props.des.split(' ').length>1?showStyle === "h-12"?
                <FontAwesomeIcon icon = {faAngleDown} className="" onClick={clickArrow}/>
                : <FontAwesomeIcon icon = {faAngleUp} className="" onClick={clickArrow}/>:"" }
            </div>
            <div className='w-[20%]'>
                {props.appointmentsSet}
            </div>
            <div className='w-[5%]'>
                <FontAwesomeIcon icon = {faPenToSquare} className="px-2" onClick={() => setShowModal(true)}/>
            </div>
            <div className='w-[5%]'>
                <FontAwesomeIcon icon = {faTrash} className="px-2" onClick={() => {
                    props.deleteUser(props.id, props.name)
                }}/>
            </div>
        </div>
    );
}

export default DoctorRow;