import React, { useEffect, useState } from 'react';
import axios from "axios";


export const RequestsListContext = React.createContext();

function RequestsContext({children}){
    
    const [requestsList, updateRequestsList] = useState([])
    useEffect(() => {
        console.log("running")
        const getRequests = async () => {
            let response = await axios.get("http://localhost:5000/api/request")
            updateRequestsList(response.data.requests)
        }
        getRequests()
    },[])
     const updateReq=(id)=>{
        updateRequestsList(requestsList.filter((req)=>req.id!=id))
     }
    return(
        <RequestsListContext.Provider value={{requestsList, updateReq}}>
            {children}
        </RequestsListContext.Provider>
    )
}

export {RequestsContext}